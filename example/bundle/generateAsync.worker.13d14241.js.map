{"version":3,"sources":["../src/workers/generateAsync.worker.js"],"names":["global","onmessage","data","index","position","options","geometry","BufferGeometry","setAttribute","BufferAttribute","setIndex","lazyGeneration","bvh","MeshBVH","serialized","serialize","postMessage","error","buffer"],"mappings":";;;AAAA;;AAIA;;;;AAEAA,MAAM,CAACC,SAAP,GAAmB,gBAAsB;AAAA,MAATC,IAAS,QAATA,IAAS;AAExC,MAAQC,KAAR,GAAqCD,IAArC,CAAQC,KAAR;AAAA,MAAeC,QAAf,GAAqCF,IAArC,CAAeE,QAAf;AAAA,MAAyBC,OAAzB,GAAqCH,IAArC,CAAyBG,OAAzB;;AACA,MAAI;AAEH,QAAMC,QAAQ,GAAG,IAAIC,qBAAJ,EAAjB;AACAD,IAAAA,QAAQ,CAACE,YAAT,CAAuB,UAAvB,EAAmC,IAAIC,sBAAJ,CAAqBL,QAArB,EAA+B,CAA/B,EAAkC,KAAlC,CAAnC;;AACA,QAAKD,KAAL,EAAa;AAEZG,MAAAA,QAAQ,CAACI,QAAT,CAAmB,IAAID,sBAAJ,CAAqBN,KAArB,EAA4B,CAA5B,EAA+B,KAA/B,CAAnB;AAEA;;AAEDE,IAAAA,OAAO,CAACM,cAAR,GAAyB,KAAzB;AACA,QAAMC,GAAG,GAAG,IAAIC,gBAAJ,CAAaP,QAAb,EAAuBD,OAAvB,CAAZ;;AACA,QAAMS,UAAU,GAAGD,iBAAQE,SAAR,CAAmBH,GAAnB,EAAwBN,QAAxB,EAAkC,KAAlC,CAAnB;;AAEAN,IAAAA,MAAM,CAACgB,WAAP,CAAoB;AAEnBC,MAAAA,KAAK,EAAE,IAFY;AAGnBH,MAAAA,UAAU,EAAVA,UAHmB;AAInBV,MAAAA,QAAQ,EAARA;AAJmB,KAApB,EAMG,CAAEU,UAAU,CAACX,KAAX,CAAiBe,MAAnB,EAA2Bd,QAAQ,CAACc,MAApC,CANH;AAQA,GAtBD,CAsBE,OAAQD,KAAR,EAAgB;AAEjBjB,IAAAA,MAAM,CAACgB,WAAP,CAAoB;AAEnBC,MAAAA,KAAK,EAALA,KAFmB;AAGnBH,MAAAA,UAAU,EAAE;AAHO,KAApB;AAOA;AAED,CApCD","file":"generateAsync.worker.13d14241.js","sourceRoot":"..","sourcesContent":["import {\n\tBufferGeometry,\n\tBufferAttribute,\n} from 'three';\nimport MeshBVH from '../MeshBVH.js';\n\nglobal.onmessage = function ( { data } ) {\n\n\tconst { index, position, options } = data;\n\ttry {\n\n\t\tconst geometry = new BufferGeometry();\n\t\tgeometry.setAttribute( 'position', new BufferAttribute( position, 3, false ) );\n\t\tif ( index ) {\n\n\t\t\tgeometry.setIndex( new BufferAttribute( index, 1, false ) );\n\n\t\t}\n\n\t\toptions.lazyGeneration = false;\n\t\tconst bvh = new MeshBVH( geometry, options );\n\t\tconst serialized = MeshBVH.serialize( bvh, geometry, false );\n\n\t\tglobal.postMessage( {\n\n\t\t\terror: null,\n\t\t\tserialized,\n\t\t\tposition,\n\n\t\t}, [ serialized.index.buffer, position.buffer ] );\n\n\t} catch ( error ) {\n\n\t\tglobal.postMessage( {\n\n\t\t\terror,\n\t\t\tserialized: null,\n\n\t\t} );\n\n\t}\n\n};\n"]}